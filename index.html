<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AI Workstation & GPU Performance Report (2026)</title>
  <style>
    :root {
      --table-border-color: #ddd;
      --table-header-bg: #f2f2f2;
      --table-row-hover-bg: #f5f5f5;
      --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      --accent-color: #007bff;
      --text-color: #333;
      --bg-color: #fff;
      --note-bg-color: #f9f9f9;
      --border-radius: 6px;
    }
    body { 
      font-family: var(--font-family); 
      margin: 0; 
      padding: 1.5em; 
      background-color: var(--bg-color);
      color: var(--text-color);
      line-height: 1.6;
    }
    header {
      text-align: center;
      margin-bottom: 2em;
    }
    h1 {
      font-size: 2.2em;
      margin-bottom: 0.2em;
    }
    .subtitle {
      font-size: 1.1em;
      color: #666;
    }
    .tabs {
      display: flex;
      border-bottom: 2px solid var(--table-border-color);
      margin-bottom: 1.5em;
    }
    .tab-button {
      padding: 10px 20px;
      cursor: pointer;
      border: none;
      background-color: transparent;
      font-size: 1em;
      border-bottom: 2px solid transparent;
      margin-bottom: -2px;
    }
    .tab-button.active {
      border-bottom-color: var(--accent-color);
      font-weight: 600;
    }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    #controls {
      display: flex;
      gap: 1em;
      margin-bottom: 1.5em;
      align-items: center;
      flex-wrap: wrap;
    }
    #controls input, #controls select {
      padding: 0.6em;
      border: 1px solid #ccc;
      border-radius: var(--border-radius);
      font-size: 0.95em;
    }
    table { 
      border-collapse: collapse; 
      width: 100%; 
      margin-top: 1em;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }
    th, td { 
      border: 1px solid var(--table-border-color); 
      padding: 0.75em; 
      text-align: left; 
      vertical-align: top;
    }
    th { 
      background: var(--table-header-bg); 
      cursor: pointer; 
      font-weight: 600;
      position: sticky;
      top: 0;
    }
    tr:hover { background: var(--table-row-hover-bg); }
    .notes-cell {
      font-size: 0.9em;
      line-height: 1.5;
      background-color: var(--note-bg-color);
    }
    .notes-cell ul {
      padding-left: 1.2em;
      margin: 0;
    }
    .notes-cell li {
      margin-bottom: 0.5em;
    }
    .highlight-best {
      background-color: #e8f5e9; /* Light green */
      font-weight: bold;
    }
    .highlight-best td:first-child::before {
      content: 'üèÜ ';
    }
    #diy-comparison {
      padding: 1em;
    }
    #diy-comparison h3 {
      margin-top: 0;
    }
    .comparison-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5em;
    }
    .comparison-card {
      border: 1px solid var(--table-border-color);
      border-radius: var(--border-radius);
      padding: 1.5em;
    }
    .comparison-card h4 {
      margin-top: 0;
      color: var(--accent-color);
    }
    .price-diff {
      font-weight: bold;
    }
    .price-diff.positive { color: #28a745; }
    .price-diff.negative { color: #dc3545; }

    /* ‚îÄ‚îÄ GPU Rankings tab ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    #gpu-controls { display: flex; gap: 0.8em; flex-wrap: wrap; margin-bottom: 1.2em; align-items: center; }
    #gpu-controls select, #gpu-controls input { padding: 0.55em 0.75em; border: 1px solid #ccc; border-radius: var(--border-radius); font-size: 0.93em; }
    .mfr-filter-group { display: flex; gap: 0.4em; }
    .mfr-btn {
      padding: 0.45em 1em; border: 2px solid #ccc; border-radius: 20px;
      background: #fff; cursor: pointer; font-size: 0.9em; font-weight: 500; transition: all 0.15s;
    }
    .mfr-btn.active-nvidia  { border-color: #76b900; background: #76b900; color: #fff; }
    .mfr-btn.active-amd     { border-color: #ed1c24; background: #ed1c24; color: #fff; }
    .mfr-btn.active-apple   { border-color: #555;    background: #555;    color: #fff; }
    .mfr-btn.active-all     { border-color: var(--accent-color); background: var(--accent-color); color: #fff; }
    .score-bar-wrap { display: flex; align-items: center; gap: 0.5em; min-width: 120px; }
    .score-bar { height: 10px; border-radius: 5px; background: var(--accent-color); transition: width 0.3s; }
    .score-num { font-size: 0.85em; white-space: nowrap; }
    .mfr-badge {
      display: inline-block; padding: 2px 8px; border-radius: 10px; font-size: 0.78em;
      font-weight: 700; letter-spacing: 0.04em;
    }
    .badge-nvidia { background: #d4edda; color: #155724; }
    .badge-amd    { background: #fde8e8; color: #721c24; }
    .badge-apple  { background: #e2e3e5; color: #383d41; }
    .mfr-comparison-section { margin-top: 2em; }
    .mfr-comparison-section h3 { margin-bottom: 0.8em; }
    .mfr-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.2em; }
    .mfr-card { border-radius: var(--border-radius); padding: 1.4em; border: 1px solid var(--table-border-color); }
    .mfr-card.nvidia { border-top: 4px solid #76b900; }
    .mfr-card.amd    { border-top: 4px solid #ed1c24; }
    .mfr-card.apple  { border-top: 4px solid #555; }
    .mfr-card h4 { margin: 0 0 0.7em; font-size: 1.05em; }
    .mfr-card ul { margin: 0; padding-left: 1.2em; font-size: 0.92em; line-height: 1.7; }
    .mfr-card .verdict { margin-top: 0.8em; padding: 0.6em 0.9em; background: var(--note-bg-color); border-radius: 4px; font-size: 0.88em; }
    #gpuTable th { white-space: nowrap; }

    /* ‚îÄ‚îÄ Best Match Finder tab ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    #bestmatch { padding: 0; }
    .finder-layout { display: grid; grid-template-columns: 340px 1fr; gap: 2em; align-items: start; }
    @media (max-width: 800px) { .finder-layout { grid-template-columns: 1fr; } }
    .finder-form { background: var(--note-bg-color); border: 1px solid var(--table-border-color); border-radius: var(--border-radius); padding: 1.6em; }
    .finder-form h3 { margin-top: 0; }
    .form-group { margin-bottom: 1.1em; }
    .form-group label { display: block; font-weight: 600; margin-bottom: 0.35em; font-size: 0.95em; }
    .form-group select, .form-group input[type=range] { width: 100%; padding: 0.55em 0.7em; border: 1px solid #ccc; border-radius: var(--border-radius); font-size: 0.93em; box-sizing: border-box; }
    .budget-display { font-size: 1.05em; font-weight: 700; color: var(--accent-color); margin-top: 0.25em; }
    .os-btn-group { display: flex; gap: 0.4em; flex-wrap: wrap; }
    .os-btn {
      flex: 1; padding: 0.55em 0.5em; border: 2px solid #ccc; border-radius: var(--border-radius);
      background: #fff; cursor: pointer; font-size: 0.9em; font-weight: 500; text-align: center; transition: all 0.15s;
    }
    .os-btn.active { border-color: var(--accent-color); background: var(--accent-color); color: #fff; }
    .find-btn {
      width: 100%; padding: 0.75em; background: var(--accent-color); color: #fff;
      border: none; border-radius: var(--border-radius); font-size: 1em; font-weight: 700;
      cursor: pointer; margin-top: 0.4em; transition: opacity 0.15s;
    }
    .find-btn:hover { opacity: 0.88; }
    .result-area { min-height: 200px; }
    .result-placeholder { color: #999; font-style: italic; margin-top: 1em; }
    .result-card {
      border: 2px solid var(--accent-color); border-radius: var(--border-radius);
      padding: 1.6em; background: #f0f7ff;
    }
    .result-card .result-rank { font-size: 0.82em; color: #666; text-transform: uppercase; letter-spacing: 0.06em; }
    .result-card .result-name { font-size: 1.5em; font-weight: 700; margin: 0.15em 0 0.5em; }
    .result-card .result-meta { display: flex; flex-wrap: wrap; gap: 0.6em; margin-bottom: 1em; }
    .result-meta-chip {
      background: #fff; border: 1px solid #ccc; border-radius: 20px;
      padding: 0.25em 0.75em; font-size: 0.85em; font-weight: 500;
    }
    .result-card .result-why { font-size: 0.93em; line-height: 1.6; }
    .result-card .result-why strong { color: var(--accent-color); }
    .alt-results { margin-top: 1.4em; }
    .alt-results h4 { margin-bottom: 0.6em; font-size: 0.95em; color: #555; }
    .alt-card {
      border: 1px solid var(--table-border-color); border-radius: var(--border-radius);
      padding: 0.9em 1.1em; margin-bottom: 0.7em; background: #fff;
      display: flex; justify-content: space-between; align-items: flex-start; gap: 1em;
    }
    .alt-card .alt-name { font-weight: 600; }
    .alt-card .alt-reason { font-size: 0.85em; color: #666; margin-top: 0.2em; }
    .alt-card .alt-price { font-weight: 700; white-space: nowrap; color: #333; }
    .no-result { padding: 1.5em; background: #fff8e1; border: 1px solid #ffe082; border-radius: var(--border-radius); }
  </style>
</head>
<body>
<header>
  <h1>AI Workstation & GPU Performance Report (2026)</h1>
  <p class="subtitle">A comparative analysis of pre-built and DIY systems for local AI development.</p>
</header>

<div class="tabs">
  <button class="tab-button active" onclick="openTab(event, 'prebuilt')">Pre-built Systems</button>
  <button class="tab-button" onclick="openTab(event, 'diy')">DIY vs. Pre-built</button>
  <button class="tab-button" onclick="openTab(event, 'gpus'); initGpuTab()">GPU Rankings</button>
  <button class="tab-button" onclick="openTab(event, 'bestmatch')">Best Match Finder</button>
</div>

<div id="prebuilt" class="tab-content active">
  <div id="controls">
    <input type="text" id="searchInput" onkeyup="filterTable()" placeholder="Search by model, GPU, brand...">
    <select id="modelFilter" onchange="filterTable()">
      <option value="">Filter by Best Model...</option>
      <option>70B+ (Unquantized)</option>
      <option>120B+ (Quantized)</option>
      <option>30B-70B</option>
      <option>7B-30B</option>
    </select>
    <select id="typeFilter" onchange="filterTable()">
      <option value="">Filter by Type...</option>
      <option>Desktop</option>
      <option>Laptop</option>
    </select>
    <select id="osFilter" onchange="filterTable()">
      <option value="">Filter by OS...</option>
      <option>Windows</option>
      <option>macOS</option>
      <option>Linux</option>
    </select>
  </div>
  <p>Table columns are sortable. All systems are evaluated for AI/ML workloads. TG = Tokens/sec Generation (batch size 1).</p>
  <table id="hardwareTable">
    <thead>
      <tr>
        <th onclick="sortTable(0)">Rank</th>
        <th onclick="sortTable(1)">Model</th>
        <th onclick="sortTable(2)">Type</th>
        <th onclick="sortTable(3)">GPU</th>
        <th onclick="sortTable(4)">VRAM</th>
        <th onclick="sortTable(5)">Best Model (Size)</th>
        <th onclick="sortTable(6)">Tokens/sec (TG)</th>
        <th onclick="sortTable(7)">Price</th>
        <th onclick="sortTable(8)">Notes & Evidence</th>
      </tr>
    </thead>
    <tbody>
      <tr class="highlight-best">
        <td>1</td>
        <td>HP Z8 G4 (Custom)</td>
        <td>Desktop</td>
        <td>Quad NVIDIA A100 40GB</td>
        <td>160 GB</td>
        <td>70B+ (Unquantized)</td>
        <td>~540</td>
        <td>$30000</td>
        <td class="notes-cell"><ul>
          <li><strong>Data Center Power:</strong> Can run unquantized 70B models entirely in VRAM.</li>
          <li><strong>NVLink Advantage:</strong> Full peer-to-peer communication between GPUs is critical for massive model inference.</li>
          <li><strong>Secondary Market:</strong> Often available on the used market, making it a "budget" entry into high-end AI.</li>
          <li><strong>Power/Cooling:</strong> Requires significant power and cooling infrastructure not suitable for a typical office.</li>
        </ul></td>
      </tr>
      <tr>
        <td>2</td>
        <td>Dell Precision 7960 Tower</td>
        <td>Desktop</td>
        <td>Quad NVIDIA RTX 5000 Ada</td>
        <td>128 GB</td>
        <td>120B+ (Quantized)</td>
        <td>~450</td>
        <td>$20000</td>
        <td class="notes-cell"><ul>
          <li><strong>Enterprise Grade:</strong> Built for high-concurrency professional AI, with certified drivers and support.</li>
          <li><strong>RTX 6000 Ada Recommended:</strong> For max performance, users often upgrade to RTX 6000 Ada GPUs for more VRAM and CUDA cores.</li>
          <li><strong>NVLink Bridge:</strong> Essential for combining GPU memory pools effectively.</li>
        </ul></td>
      </tr>
      <tr>
        <td>3</td>
        <td>Apple Mac Studio (M3 Ultra)</td>
        <td>Desktop</td>
        <td>Apple 80-core GPU</td>
        <td>192 GB (Unified)</td>
        <td>120B+ (Quantized)</td>
        <td>~97</td>
        <td>$8000</td>
        <td class="notes-cell"><ul>
          <li><strong>Memory Bandwidth King:</strong> Unmatched unified memory is ideal for huge model inference.</li>
          <li><strong>Underwhelming TG?:</strong> Some users report tokens/sec (TG) is lower than expected vs. high-end NVIDIA cards (e.g., 97 t/s vs 136 t/s on an RTX 3090 for some models).</li>
          <li><strong>Silent & Efficient:</strong> Consumes far less power and is virtually silent compared to NVIDIA workstations.</li>
          <li><strong>MLX Framework:</strong> Apple's MLX framework can be 20-30% faster than other libraries like Ollama on Apple Silicon.</li>
        </ul></td>
      </tr>
      <tr>
        <td>4</td>
        <td>HP OMEN 45L (2025)</td>
        <td>Desktop</td>
        <td>NVIDIA RTX 5090</td>
        <td>32 GB</td>
        <td>70B+ (Quantized)</td>
        <td>~140</td>
        <td>$4500</td>
        <td class="notes-cell"><ul>
          <li><strong>New Flagship:</strong> The RTX 5090 offers ~1,792 GB/s bandwidth, a significant leap for memory-bound LLM tasks.</li>
          <li><strong>MoE Performance:</strong> Excels at Mixture-of-Experts models, with benchmarks showing 100-140 t/s generation.</li>
          <li><strong>"Space Heater":</strong> Early reports suggest very high power draw and thermal output, requiring excellent case airflow.</li>
        </ul></td>
      </tr>
       <tr>
        <td>5</td>
        <td>Alienware Aurora R16</td>
        <td>Desktop</td>
        <td>NVIDIA RTX 4090</td>
        <td>24 GB</td>
        <td>30B-70B</td>
        <td>~95</td>
        <td>$4000</td>
        <td class="notes-cell"><ul>
          <li><strong>Community Favorite:</strong> Widely regarded as the best value for running 7B to 30B models locally.</li>
          <li><strong>30% Slower than 5090:</strong> A significant performance gap, but at a much lower price point.</li>
          <li><strong>Stable & Supported:</strong> Mature drivers and extensive community support for AI/ML workloads.</li>
        </ul></td>
      </tr>
      <tr>
        <td>6</td>
        <td>Lenovo ThinkStation P620</td>
        <td>Desktop</td>
        <td>Dual NVIDIA RTX A6000</td>
        <td>96 GB</td>
        <td>120B+ (Quantized)</td>
        <td>~300</td>
        <td>$15000</td>
        <td class="notes-cell"><ul>
            <li><strong>CPU Powerhouse:</strong> The Threadripper Pro 5995WX CPU provides massive PCIe bandwidth for multiple GPUs.</li>
            <li><strong>PSU/Fitment Issues:</strong> Real-world user threads mention PSU limitations and tight physical space when fitting two high-end GPUs.</li>
            <li><strong>Dual A6000 Recommended:</strong> Community advice points to using two RTX A6000s as a potent, albeit expensive, combination.</li>
        </ul></td>
      </tr>
      <tr>
        <td>7</td>
        <td>Asus ROG Strix Scar 18</td>
        <td>Laptop</td>
        <td>NVIDIA RTX 5090 (Laptop)</td>
        <td>24 GB</td>
        <td>30B-70B</td>
        <td>~80</td>
        <td>$4500</td>
        <td class="notes-cell"><ul>
            <li><strong>Desktop-Class Laptop GPU:</strong> Benchmarks from similar MSI models show impressive performance but with caveats.</li>
            <li><strong>Thermal Throttling:</strong> The main challenge is keeping the GPU cool enough to sustain peak performance.</li>
            <li><strong>VRAM is 24GB:</strong> Note: Leaked specs showing 32GB were incorrect for the laptop version.</li>
        </ul></td>
      </tr>
      <tr>
        <td>8</td>
        <td>Apple MacBook Pro 16 (M3 Max)</td>
        <td>Laptop</td>
        <td>Apple 30-core GPU</td>
        <td>64 GB (Unified)</td>
        <td>30B-70B</td>
        <td>~40</td>
        <td>$3000</td>
        <td class="notes-cell"><ul>
            <li><strong>Popular with ML Engineers:</strong> Excellent for development and testing on the go due to its large unified memory.</li>
            <li><strong>"Not for Heavy Training":</strong> Community consensus is that it's an inference machine, not for training large models from scratch.</li>
            <li><strong>Performance:</strong> Can achieve 35-40 t/s on 14B parameter models (Q4 quantized).</li>
        </ul></td>
      </tr>
      <tr>
        <td>9</td>
        <td>Asus ROG Flow Z13 (2025)</td>
        <td>Laptop</td>
        <td>AMD Radeon 780M (iGPU)</td>
        <td>32 GB (Shared)</td>
        <td>7B-30B</td>
        <td>~25</td>
        <td>$2100</td>
        <td class="notes-cell"><ul>
            <li><strong>The "Unicorn" APU:</strong> The Ryzen AI 300 series is highly praised for its powerful integrated GPU.</li>
            <li><strong>ROCm vs. Vulkan:</strong> Performance depends heavily on the backend used; vLLM support is a major plus.</li>
            <li><strong>BIOS Gotcha:</strong> Users report needing to manually allocate 32GB of system RAM to the iGPU in BIOS for best performance.</li>
        </ul></td>
      </tr>
      <tr>
        <td>10</td>
        <td>ASUS Zenbook A14 (2025)</td>
        <td>Laptop</td>
        <td>Qualcomm Adreno NPU</td>
        <td>32 GB (Shared)</td>
        <td>7B-30B</td>
        <td>~6</td>
        <td>$1800</td>
        <td class="notes-cell"><ul>
            <li><strong>On-Device AI Focus:</strong> Designed for efficient, low-power AI tasks.</li>
            <li><strong>NPU Not Yet Supported:</strong> The powerful NPU is not currently usable by most open-source LLM tools (e.g., llama.cpp).</li>
            <li><strong>Community Verdict:</strong> Currently not recommended for serious local LLM work until software support matures. Performance is low (~6 t/s on 32B models).</li>
        </ul></td>
      </tr>
    </tbody>
  </table>
</div>

<div id="diy" class="tab-content">
  <div id="diy-comparison">
    <h3>DIY Cost Savings & Performance Analysis</h3>
    <p>Building your own PC can offer significant savings and tailored performance. Here‚Äôs a comparison against popular pre-built options.</p>
    <div class="comparison-grid">
      <div class="comparison-card">
        <h4>DIY Build: "The 4090 Killer"</h4>
        <p><strong>Components:</strong> Intel Core i7-14700K, NVIDIA RTX 4090 (24GB), 64GB DDR5 RAM, 2TB NVMe SSD, 1000W PSU.</p>
        <p><strong>Estimated DIY Cost:</strong> $3,200</p>
        <p><strong>Comparable Pre-built:</strong> Alienware Aurora R16 (~$4,000)</p>
        <p><strong>Savings:</strong> <span class="price-diff positive">~$800 (20%)</span></p>
        <p><strong>Notes:</strong> Offers identical core performance for LLMs as the pre-built but requires assembly. You get to choose higher quality components (e.g., PSU, motherboard).</p>
      </div>
      <div class="comparison-card">
        <h4>DIY Build: "Dual 3090 Workstation"</h4>
        <p><strong>Components:</strong> AMD Ryzen 9 7950X, 2x NVIDIA RTX 3090 (24GB, used), 128GB DDR5 RAM, 4TB NVMe SSD, 1600W PSU.</p>
        <p><strong>Estimated DIY Cost:</strong> $4,500 (with used GPUs)</p>
        <p><strong>Comparable Pre-built:</strong> Older high-end workstations (~$8,000+ new)</p>
        <p><strong>Savings:</strong> <span class="price-diff positive">~$3,500+ (40-50%)</span></p>
        <p><strong>Notes:</strong> By using second-hand RTX 3090s (known for their 24GB VRAM), you can build a 48GB VRAM machine for a fraction of the cost of a new professional workstation. NVLink support is absent, but performance is still excellent for the price.</p>
      </div>
       <div class="comparison-card">
        <h4>When to Buy Pre-built</h4>
        <p><strong>Warranty & Support:</strong> A single point of contact for troubleshooting is invaluable for mission-critical work.</p>
        <p><strong>Certified Drivers:</strong> Workstations from Dell, HP, and Lenovo come with optimized and certified drivers for professional applications.</p>
        <p><strong>Time is Money:</strong> The time spent building, configuring, and troubleshooting a DIY machine can outweigh the cost savings for professionals.</p>
        <p><strong>Specialized Hardware:</strong> Systems with multiple pro-grade GPUs (like Quad A100s) require chassis and motherboards not typically available to consumers.</p>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê GPU RANKINGS TAB -->
<div id="gpus" class="tab-content">
  <div id="gpu-controls">
    <div class="mfr-filter-group">
      <button class="mfr-btn active-all" id="mfr-all"    onclick="setMfrFilter('all')">All</button>
      <button class="mfr-btn"            id="mfr-nvidia" onclick="setMfrFilter('NVIDIA')">NVIDIA</button>
      <button class="mfr-btn"            id="mfr-amd"    onclick="setMfrFilter('AMD')">AMD</button>
      <button class="mfr-btn"            id="mfr-apple"  onclick="setMfrFilter('Apple')">Apple</button>
    </div>
    <select id="gpuSortSelect" onchange="renderGpuTable()">
      <option value="score">Sort: Effectiveness Score</option>
      <option value="tg7b">Sort: Tokens/sec (7B Q4)</option>
      <option value="bw">Sort: Memory Bandwidth</option>
      <option value="vram">Sort: VRAM</option>
      <option value="price">Sort: Price (Low‚ÜíHigh)</option>
      <option value="valueScore">Sort: Value (t/s per $)</option>
    </select>
    <input type="text" id="gpuSearch" oninput="renderGpuTable()" placeholder="Search GPUs‚Ä¶" style="min-width:160px;">
  </div>
  <p style="margin-top:0;font-size:0.92em;color:#555;">
    <strong>Effectiveness Score</strong> blends raw token generation speed, memory bandwidth, and VRAM capacity into a single 0‚Äì100 index.
    <strong>Value Score</strong> = tokens/sec per $100 spent. Click any column header to sort.
  </p>
  <table id="gpuTable">
    <thead>
      <tr>
        <th onclick="gpuSortCol('rank')">#</th>
        <th onclick="gpuSortCol('name')">GPU</th>
        <th onclick="gpuSortCol('mfr')">Maker</th>
        <th onclick="gpuSortCol('vram')">VRAM (GB)</th>
        <th onclick="gpuSortCol('bw')">Bandwidth (GB/s)</th>
        <th onclick="gpuSortCol('tg7b')">TG 7B Q4 (t/s)</th>
        <th onclick="gpuSortCol('tg70b')">TG 70B Q4 (t/s)</th>
        <th onclick="gpuSortCol('price')">Price (USD)</th>
        <th onclick="gpuSortCol('valueScore')">Value Score</th>
        <th onclick="gpuSortCol('score')">Effectiveness</th>
        <th onclick="gpuSortCol('bestFor')">Best For</th>
      </tr>
    </thead>
    <tbody id="gpuTableBody"></tbody>
  </table>

  <div class="mfr-comparison-section">
    <h3>Manufacturer Tradeoffs</h3>
    <div class="mfr-cards">
      <div class="mfr-card nvidia">
        <h4>üü¢ NVIDIA</h4>
        <ul>
          <li><strong>Speed king:</strong> Highest tokens/sec for models that fit in VRAM ‚Äî RTX 5090 at 1,792 GB/s is unmatched on the consumer market.</li>
          <li><strong>CUDA ecosystem:</strong> Every AI framework (PyTorch, vLLM, TensorRT, llama.cpp) works out of the box. Zero configuration headaches.</li>
          <li><strong>VRAM ceiling:</strong> Consumer cards top out at 32GB (5090). Professional cards (RTX 6000 Ada: 48GB, A100: 80GB) cost significantly more.</li>
          <li><strong>Training:</strong> Best-in-class for fine-tuning and training with full CUDA support.</li>
          <li><strong>Power draw:</strong> RTX 5090 ‚âà 575W ‚Äî a space heater. Dedicated airflow/cooling needed.</li>
          <li><strong>P2P blocked:</strong> Consumer multi-GPU peer-to-peer is disabled by default in drivers (workaround requires patched kernel modules).</li>
        </ul>
        <div class="verdict">‚úÖ <strong>Choose NVIDIA if:</strong> you run models ‚â§30B and want maximum speed, or need fine-tuning &amp; training.</div>
      </div>
      <div class="mfr-card amd">
        <h4>üî¥ AMD</h4>
        <ul>
          <li><strong>Ryzen AI Max+ 395:</strong> The standout ‚Äî 128GB unified memory at ~$1,500‚Äì2,500 is the cheapest way to run 70B models on x86.</li>
          <li><strong>Bandwidth:</strong> Radeon RX 7900 XTX has 960 GB/s ‚Äî competitive with NVIDIA RTX 4090 (1,008 GB/s), at a lower price.</li>
          <li><strong>ROCm ecosystem:</strong> Improving rapidly (vLLM support added 2024), but still lags CUDA. Occasional bugs, fewer tutorials.</li>
          <li><strong>Vulkan backend:</strong> llama.cpp Vulkan is often faster than ROCm for pure inference; ~20% advantage in recent tests.</li>
          <li><strong>Discrete VRAM limit:</strong> RX 7900 XTX tops at 24GB ‚Äî same ceiling as RTX 4090.</li>
          <li><strong>BIOS gotcha:</strong> Ryzen AI Max laptops default to 32GB GPU allocation; must manually set to 96‚Äì128GB for proper performance.</li>
        </ul>
        <div class="verdict">‚úÖ <strong>Choose AMD if:</strong> you need 70B+ on a budget (Ryzen AI Max+ 395), or want competitive discrete GPU performance at lower cost than NVIDIA.</div>
      </div>
      <div class="mfr-card apple">
        <h4>‚ö´ Apple Silicon</h4>
        <ul>
          <li><strong>Unified memory:</strong> M3 Ultra at 192‚Äì512GB is the only consumer path to running 200B+ models locally without a multi-GPU rig.</li>
          <li><strong>MLX framework:</strong> Apple-optimized; 20‚Äì30% faster than Ollama for inference. Speculative decoding can roughly double token generation.</li>
          <li><strong>Token generation speed:</strong> M3 Ultra (~800 GB/s) loses to RTX 5090 (1,792 GB/s) for models that fit in VRAM ‚Äî ~97 t/s vs ~250 t/s on 7B.</li>
          <li><strong>Power efficiency:</strong> Mac Studio at ~150W vs RTX 5090 system at ~800W+. Silent under moderate load.</li>
          <li><strong>Concurrency:</strong> Handles concurrent requests worse than NVIDIA; not ideal for multi-user serving.</li>
          <li><strong>No GPU-only option:</strong> Apple Silicon is integrated ‚Äî you buy the whole computer, not a card.</li>
          <li><strong>macOS only:</strong> No Linux, no CUDA. Only MLX, llama.cpp, and Ollama with Metal.</li>
        </ul>
        <div class="verdict">‚úÖ <strong>Choose Apple if:</strong> you need to run very large models (70B+) in a quiet, efficient package, or you're already in the Apple ecosystem.</div>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê BEST MATCH FINDER TAB -->
<div id="bestmatch" class="tab-content">
  <h3 style="margin-top:0;">Find Your Best Match</h3>
  <p style="margin-top:-0.5em;color:#555;font-size:0.94em;">Tell us your preferences and we'll narrow the field to the best hardware option for you.</p>
  <div class="finder-layout">
    <div class="finder-form">
      <h3 style="margin-top:0;">Your Requirements</h3>

      <div class="form-group">
        <label>Preferred OS / Platform</label>
        <div class="os-btn-group">
          <button class="os-btn" id="os-macos"   onclick="setOs('macos')">macOS</button>
          <button class="os-btn" id="os-windows" onclick="setOs('windows')">Windows</button>
          <button class="os-btn" id="os-linux"   onclick="setOs('linux')">Linux</button>
          <button class="os-btn active" id="os-any" onclick="setOs('any')">Any</button>
        </div>
      </div>

      <div class="form-group">
        <label>Form Factor</label>
        <select id="ff-select">
          <option value="any">Any (desktop or laptop)</option>
          <option value="desktop">Desktop only</option>
          <option value="laptop">Laptop / portable</option>
        </select>
      </div>

      <div class="form-group">
        <label>Budget <span class="budget-display" id="budgetLabel">$5,000</span></label>
        <input type="range" id="budgetSlider" min="500" max="35000" step="500" value="5000"
               oninput="document.getElementById('budgetLabel').textContent = '$' + Number(this.value).toLocaleString()">
        <div style="display:flex;justify-content:space-between;font-size:0.78em;color:#888;margin-top:2px;">
          <span>$500</span><span>$35,000</span>
        </div>
      </div>

      <div class="form-group">
        <label>Largest model I want to run</label>
        <select id="modelSize-select">
          <option value="7">7B ‚Äì Small, fast (Mistral 7B, Gemma 7B)</option>
          <option value="14">14B ‚Äì Medium (Qwen2.5 14B, Phi-4)</option>
          <option value="30" selected>30B ‚Äì Large (Qwen 30B, Gemma 27B)</option>
          <option value="70">70B ‚Äì XL (Llama 3 70B, Qwen 72B)</option>
          <option value="120">120B+ ‚Äì Massive (Llama 3 405B, DeepSeek 671B)</option>
        </select>
      </div>

      <div class="form-group">
        <label>Priority</label>
        <select id="priority-select">
          <option value="speed">Speed (tokens/sec)</option>
          <option value="value" selected>Value (best for budget)</option>
          <option value="capacity">Capacity (fit largest model)</option>
          <option value="portable">Portability</option>
        </select>
      </div>

      <button class="find-btn" onclick="runFinder()">Find Best Match ‚Üí</button>
    </div>

    <div class="result-area" id="finderResults">
      <p class="result-placeholder">‚Üê Set your requirements and click "Find Best Match"</p>
    </div>
  </div>
</div>

<script>
  function openTab(evt, tabName) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tab-content");
    for (i = 0; i < tabcontent.length; i++) {
      tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tab-button");
    for (i = 0; i < tablinks.length; i++) {
      tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(tabName).style.display = "block";
    evt.currentTarget.className += " active";
  }

  function sortTable(n) {
    var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
    table = document.getElementById("hardwareTable");
    switching = true;
    var currentDir = table.getAttribute("data-sort-dir-" + n) || "asc";
    dir = (currentDir === "asc") ? "desc" : "asc";
    table.setAttribute("data-sort-dir-" + n, dir);
    
    // Clear existing sort indicators
    var headers = table.getElementsByTagName("TH");
    for (i = 0; i < headers.length; i++) {
        headers[i].innerHTML = headers[i].innerHTML.replace(/ (‚Üë|‚Üì)$/, "");
    }

    while (switching) {
      switching = false;
      rows = table.rows;
      for (i = 1; i < (rows.length - 1); i++) {
        shouldSwitch = false;
        x = rows[i].getElementsByTagName("TD")[n];
        y = rows[i + 1].getElementsByTagName("TD")[n];
        
        var xContent = x.innerText;
        var yContent = y.innerText;

        // For numeric columns, parse the numbers
        if (n === 0 || n === 4 || n === 6 || n === 7) {
            xContent = parseFloat(xContent.replace(/[^0-9.\-]+/g,""));
            yContent = parseFloat(yContent.replace(/[^0-9.\-]+/g,""));
        } else {
            xContent = xContent.toLowerCase();
            yContent = yContent.toLowerCase();
        }

        if (dir == "asc") {
          if (xContent > yContent) {
            shouldSwitch = true;
            break;
          }
        } else if (dir == "desc") {
          if (xContent < yContent) {
            shouldSwitch = true;
            break;
          }
        }
      }
      if (shouldSwitch) {
        rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
        switching = true;
        switchcount++;
      }
    }
    // Add sort indicator to header
    var sortedHeader = headers[n];
    if (dir === 'asc') {
        sortedHeader.innerHTML += ' &uarr;';
    } else {
        sortedHeader.innerHTML += ' &darr;';
    }
  }

  function filterTable() {
    var input, filter, table, tr, td, i, txtValue;
    var searchInput = document.getElementById("searchInput").value.toUpperCase();
    var modelFilter = document.getElementById("modelFilter").value;
    var typeFilter = document.getElementById("typeFilter").value.toUpperCase();
    table = document.getElementById("hardwareTable");
    tr = table.getElementsByTagName("tr");

    for (i = 1; i < tr.length; i++) { // Start from 1 to skip header
        // Ignore rows that are part of the notes
        if (tr[i].classList.contains('notes-row')) {
            continue;
        }
        tr[i].style.display = ""; // Reset display
        
        let isVisible = true;

        // Search filter
        let rowText = tr[i].textContent || tr[i].innerText;
        if (rowText.toUpperCase().indexOf(searchInput) === -1) {
            isVisible = false;
        }

        // Model filter
        if (isVisible && modelFilter) {
            let modelCell = tr[i].getElementsByTagName("td")[5];
            if (modelCell) {
                let modelText = modelCell.innerText;
                if (!modelText.includes(modelFilter)) {
                    isVisible = false;
                }
            }
        }

        // Type filter
        if (isVisible && typeFilter) {
            let typeCell = tr[i].getElementsByTagName("td")[2];
            if (typeCell) {
                if (typeCell.innerText.toUpperCase().indexOf(typeFilter) === -1) {
                    isVisible = false;
                }
            }
        }
        
        tr[i].style.display = isVisible ? "" : "none";
    }
  }

  /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     GPU RANKINGS DATA + LOGIC
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
  const GPU_DATA = [
    // name, mfr, vram, bw (GB/s), tg7b (t/s), tg70b (t/s or null), price ($USD), tier, bestFor
    { name:"RTX 5090",           mfr:"NVIDIA", vram:32,  bw:1792, tg7b:250, tg70b:null,  price:1999,  tier:"consumer",     bestFor:"Fastest consumer GPU for ‚â§30B models" },
    { name:"RTX 4090",           mfr:"NVIDIA", vram:24,  bw:1008, tg7b:140, tg70b:null,  price:1200,  tier:"consumer",     bestFor:"Best value NVIDIA for 7B‚Äì24B models" },
    { name:"RTX 3090",           mfr:"NVIDIA", vram:24,  bw:936,  tg7b:130, tg70b:null,  price:600,   tier:"consumer",     bestFor:"Budget NVIDIA; great 24GB VRAM value" },
    { name:"RTX 5090 (Laptop)",  mfr:"NVIDIA", vram:24,  bw:960,  tg7b:140, tg70b:null,  price:3500,  tier:"laptop",       bestFor:"Portable CUDA workload; watch thermals" },
    { name:"RTX 4090 (Laptop)",  mfr:"NVIDIA", vram:16,  bw:576,  tg7b:80,  tg70b:null,  price:2500,  tier:"laptop",       bestFor:"Mobile CUDA inference up to 13B" },
    { name:"A100 80GB (PCIe)",   mfr:"NVIDIA", vram:80,  bw:1935, tg7b:220, tg70b:18,    price:5000,  tier:"professional", bestFor:"70B unquantized; production inference" },
    { name:"RTX 6000 Ada (48GB)",mfr:"NVIDIA", vram:48,  bw:960,  tg7b:200, tg70b:8,     price:6000,  tier:"professional", bestFor:"High-VRAM pro GPU; NVLink + ECC" },
    { name:"RTX A6000 (48GB)",   mfr:"NVIDIA", vram:48,  bw:768,  tg7b:180, tg70b:7,     price:3000,  tier:"professional", bestFor:"72B Q4 capable; strong multi-GPU value" },
    { name:"H100 80GB (PCIe)",   mfr:"NVIDIA", vram:80,  bw:2000, tg7b:260, tg70b:22,    price:25000, tier:"datacenter",   bestFor:"High-throughput production serving" },
    { name:"RX 7900 XTX",        mfr:"AMD",    vram:24,  bw:960,  tg7b:135, tg70b:null,  price:800,   tier:"consumer",     bestFor:"Best AMD discrete; rival to RTX 4090" },
    { name:"RX 7900 XT",         mfr:"AMD",    vram:20,  bw:800,  tg7b:115, tg70b:null,  price:650,   tier:"consumer",     bestFor:"Budget AMD; solid 20B performer" },
    { name:"Ryzen AI Max+ 395",  mfr:"AMD",    vram:128, bw:256,  tg7b:90,  tg70b:6,     price:1800,  tier:"laptop/mini",  bestFor:"Cheapest 70B-capable x86 system" },
    { name:"M3 Ultra (192GB)",   mfr:"Apple",  vram:192, bw:800,  tg7b:120, tg70b:20,    price:8000,  tier:"desktop",      bestFor:"Up to 120B+ models; silent & efficient" },
    { name:"M3 Ultra (512GB)",   mfr:"Apple",  vram:512, bw:800,  tg7b:120, tg70b:20,    price:10000, tier:"desktop",      bestFor:"200B+ models; unmatched capacity" },
    { name:"M3 Max (128GB)",     mfr:"Apple",  vram:128, bw:300,  tg7b:60,  tg70b:5,     price:4000,  tier:"laptop",       bestFor:"Portable 70B inference; macOS dev" },
    { name:"M4 Max (128GB)",     mfr:"Apple",  vram:128, bw:410,  tg7b:75,  tg70b:6,     price:4200,  tier:"laptop",       bestFor:"Improved MacBook for 70B inference" },
    { name:"M3 Pro (36GB)",      mfr:"Apple",  vram:36,  bw:150,  tg7b:35,  tg70b:null,  price:2200,  tier:"laptop",       bestFor:"Entry Apple; up to 30B Q4" },
  ];

  // Compute derived scores
  GPU_DATA.forEach(g => {
    // Value score: tokens/sec per $100
    g.valueScore = g.price > 0 ? parseFloat((g.tg7b / g.price * 100).toFixed(2)) : 0;
    // Effectiveness: weighted blend of normalized bw (40%), tg7b (40%), vram (20%)
    // Will normalize after computing raw values
  });
  const maxBw   = Math.max(...GPU_DATA.map(g => g.bw));
  const maxTg7b = Math.max(...GPU_DATA.map(g => g.tg7b));
  const maxVram = Math.max(...GPU_DATA.map(g => g.vram));
  GPU_DATA.forEach(g => {
    g.score = parseFloat(((g.bw/maxBw)*40 + (g.tg7b/maxTg7b)*40 + (g.vram/maxVram)*20).toFixed(1));
  });
  // Assign rank by default score desc
  const sorted = [...GPU_DATA].sort((a,b) => b.score - a.score);
  sorted.forEach((g, i) => { g.rank = i + 1; });

  let gpuActiveMfr = 'all';
  let gpuSortField = 'score';
  let gpuSortDir   = 'desc';
  let gpuInitDone  = false;

  function initGpuTab() {
    if (!gpuInitDone) { gpuInitDone = true; renderGpuTable(); }
  }

  function setMfrFilter(mfr) {
    gpuActiveMfr = mfr;
    ['all','nvidia','amd','apple'].forEach(id => {
      const el = document.getElementById('mfr-' + id);
      el.className = 'mfr-btn';
    });
    const activeId = 'mfr-' + (mfr === 'NVIDIA' ? 'nvidia' : mfr === 'AMD' ? 'amd' : mfr === 'Apple' ? 'apple' : 'all');
    const activeClass = mfr === 'NVIDIA' ? 'active-nvidia' : mfr === 'AMD' ? 'active-amd' : mfr === 'Apple' ? 'active-apple' : 'active-all';
    document.getElementById(activeId).className = 'mfr-btn ' + activeClass;
    renderGpuTable();
  }

  function gpuSortCol(field) {
    if (gpuSortField === field) {
      gpuSortDir = gpuSortDir === 'desc' ? 'asc' : 'desc';
    } else {
      gpuSortField = field;
      gpuSortDir = (field === 'price' || field === 'name' || field === 'mfr' || field === 'bestFor') ? 'asc' : 'desc';
    }
    document.getElementById('gpuSortSelect').value = ['score','tg7b','bw','vram','price','valueScore'].includes(field) ? field : 'score';
    renderGpuTable();
  }

  function renderGpuTable() {
    const sortBy   = document.getElementById('gpuSortSelect').value || gpuSortField;
    gpuSortField   = sortBy;
    const search   = (document.getElementById('gpuSearch').value || '').toLowerCase();

    let data = GPU_DATA.filter(g => {
      if (gpuActiveMfr !== 'all' && g.mfr !== gpuActiveMfr) return false;
      if (search && !g.name.toLowerCase().includes(search) && !g.mfr.toLowerCase().includes(search) && !g.bestFor.toLowerCase().includes(search)) return false;
      return true;
    });

    const numericDesc = ['score','tg7b','bw','vram','valueScore'];
    const numericAsc  = ['price'];
    data.sort((a, b) => {
      let av = a[sortBy], bv = b[sortBy];
      if (typeof av === 'string') av = av.toLowerCase();
      if (typeof bv === 'string') bv = bv.toLowerCase();
      if (av === null) av = -1;
      if (bv === null) bv = -1;
      if (numericDesc.includes(sortBy)) return bv - av;
      if (numericAsc.includes(sortBy))  return av - bv;
      return av < bv ? -1 : av > bv ? 1 : 0;
    });

    const tbody = document.getElementById('gpuTableBody');
    tbody.innerHTML = '';
    const maxScore      = Math.max(...GPU_DATA.map(g => g.score));
    const maxValueScore = Math.max(...GPU_DATA.map(g => g.valueScore));

    data.forEach((g, idx) => {
      const badgeClass = g.mfr === 'NVIDIA' ? 'badge-nvidia' : g.mfr === 'AMD' ? 'badge-amd' : 'badge-apple';
      const barWidth   = Math.round((g.score / 100) * 100);
      const valBarW    = Math.round((g.valueScore / maxValueScore) * 100);
      const tg70bStr   = g.tg70b !== null ? g.tg70b : '<span style="color:#aaa">‚Äî</span>';
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${g.rank}</td>
        <td><strong>${g.name}</strong></td>
        <td><span class="mfr-badge ${badgeClass}">${g.mfr}</span></td>
        <td>${g.vram}</td>
        <td>${g.bw.toLocaleString()}</td>
        <td>${g.tg7b}</td>
        <td>${tg70bStr}</td>
        <td>$${g.price.toLocaleString()}</td>
        <td>
          <div class="score-bar-wrap">
            <div class="score-bar" style="width:${valBarW}%;background:#fd7e14;"></div>
            <span class="score-num">${g.valueScore}</span>
          </div>
        </td>
        <td>
          <div class="score-bar-wrap">
            <div class="score-bar" style="width:${barWidth}%;"></div>
            <span class="score-num">${g.score}/100</span>
          </div>
        </td>
        <td style="font-size:0.88em;">${g.bestFor}</td>
      `;
      tbody.appendChild(tr);
    });

    // Update header sort arrows
    const headers = document.querySelectorAll('#gpuTable thead th');
    const colMap = ['rank','name','mfr','vram','bw','tg7b','tg70b','price','valueScore','score','bestFor'];
    headers.forEach((th, i) => {
      th.innerHTML = th.innerHTML.replace(/ [‚Üë‚Üì]$/, '');
      if (colMap[i] === gpuSortField) th.innerHTML += gpuSortDir === 'desc' ? ' ‚Üì' : ' ‚Üë';
    });
  }

  /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     BEST MATCH FINDER LOGIC
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

  // Systems dataset for recommendation engine
  const SYSTEMS = [
    { name:"HP Z8 G4 (Quad A100 40GB)",    os:["linux","windows"], ff:"desktop",  minPrice:25000, maxPrice:35000, maxModel:120, tg7b:540,  tg70b:50,  priority:["speed","capacity"] },
    { name:"Dell Precision 7960 Tower",    os:["linux","windows"], ff:"desktop",  minPrice:15000, maxPrice:25000, maxModel:120, tg7b:450,  tg70b:40,  priority:["speed","capacity"] },
    { name:"Apple Mac Studio (M3 Ultra 512GB)", os:["macos"],   ff:"desktop",  minPrice:9500,  maxPrice:11000, maxModel:200, tg7b:120,  tg70b:20,  priority:["capacity","value"] },
    { name:"Apple Mac Studio (M3 Ultra 192GB)", os:["macos"],   ff:"desktop",  minPrice:7500,  maxPrice:9500,  maxModel:120, tg7b:120,  tg70b:18,  priority:["capacity","value"] },
    { name:"Lenovo ThinkStation P620 (2√óA6000)", os:["linux","windows"], ff:"desktop", minPrice:12000, maxPrice:18000, maxModel:70, tg7b:300, tg70b:20, priority:["capacity","speed"] },
    { name:"HP OMEN 45L (RTX 5090)",       os:["linux","windows"], ff:"desktop",  minPrice:3500,  maxPrice:5500,  maxModel:30,  tg7b:250,  tg70b:null, priority:["speed","value"] },
    { name:"Alienware Aurora R16 (RTX 4090)", os:["linux","windows"], ff:"desktop", minPrice:3000, maxPrice:5000, maxModel:30, tg7b:140, tg70b:null, priority:["speed","value"] },
    { name:"DIY RTX 5090 Build",           os:["linux","windows"], ff:"desktop",  minPrice:2500,  maxPrice:4000,  maxModel:30,  tg7b:250,  tg70b:null, priority:["speed","value"] },
    { name:"DIY RTX 4090 Build",           os:["linux","windows"], ff:"desktop",  minPrice:2000,  maxPrice:3500,  maxModel:30,  tg7b:140,  tg70b:null, priority:["speed","value"] },
    { name:"DIY RTX 3090 Build (used)",    os:["linux","windows"], ff:"desktop",  minPrice:1200,  maxPrice:2000,  maxModel:14,  tg7b:130,  tg70b:null, priority:["value"] },
    { name:"Apple MacBook Pro 16 (M4 Max 128GB)", os:["macos"], ff:"laptop",   minPrice:3800,  maxPrice:5000,  maxModel:70,  tg7b:75,   tg70b:6,   priority:["capacity","portable"] },
    { name:"Apple MacBook Pro 16 (M3 Max 128GB)", os:["macos"], ff:"laptop",   minPrice:3200,  maxPrice:4200,  maxModel:70,  tg7b:60,   tg70b:5,   priority:["capacity","portable"] },
    { name:"Asus ROG Strix Scar 18 (RTX 5090 Laptop)", os:["linux","windows"], ff:"laptop", minPrice:3500, maxPrice:5000, maxModel:30, tg7b:140, tg70b:null, priority:["speed","portable"] },
    { name:"Asus ROG Flow Z13 / Ryzen AI Max+ 395", os:["linux","windows"], ff:"laptop", minPrice:1400, maxPrice:2800, maxModel:70, tg7b:90, tg70b:6, priority:["capacity","value","portable"] },
    { name:"Minisforum AI MAX+ 395 Mini PC", os:["linux","windows"], ff:"laptop", minPrice:1200, maxPrice:2000, maxModel:70, tg7b:90, tg70b:6, priority:["capacity","value","portable"] },
    { name:"ASUS Zenbook A14 (Snapdragon X Elite)", os:["windows"], ff:"laptop",  minPrice:900,  maxPrice:1600,  maxModel:7,   tg7b:25,   tg70b:null, priority:["portable"] },
  ];

  let selectedOs = 'any';

  function setOs(os) {
    selectedOs = os;
    ['macos','windows','linux','any'].forEach(id => {
      document.getElementById('os-' + id).classList.remove('active');
    });
    document.getElementById('os-' + os).classList.add('active');
  }

  function runFinder() {
    const budget    = parseInt(document.getElementById('budgetSlider').value);
    const modelSize = parseInt(document.getElementById('modelSize-select').value);
    const ff        = document.getElementById('ff-select').value;
    const priority  = document.getElementById('priority-select').value;

    // Filter candidates
    let candidates = SYSTEMS.filter(s => {
      if (selectedOs !== 'any' && !s.os.includes(selectedOs)) return false;
      if (ff !== 'any' && s.ff !== ff) return false;
      if (s.minPrice > budget) return false;
      if (s.maxModel < modelSize) return false;
      return true;
    });

    const resultsEl = document.getElementById('finderResults');

    if (candidates.length === 0) {
      resultsEl.innerHTML = `
        <div class="no-result">
          <strong>No exact match found.</strong><br>
          Your current filters (OS: ${selectedOs}, budget: $${budget.toLocaleString()}, model size: ${modelSize}B) don't match any system in our database.
          Try increasing your budget, relaxing the OS requirement, or choosing a smaller model size.
        </div>`;
      return;
    }

    // Score candidates by priority
    candidates.forEach(s => {
      let pts = 0;
      if (priority === 'speed')    pts = s.tg7b;
      if (priority === 'value')    pts = s.tg7b / s.minPrice * 1000;
      if (priority === 'capacity') pts = s.maxModel + (s.tg70b || 0) * 2;
      if (priority === 'portable') pts = (s.ff === 'laptop' ? 50 : 0) + s.tg7b / s.minPrice * 500;
      s._pts = pts;
    });
    candidates.sort((a, b) => b._pts - a._pts);

    const best = candidates[0];
    const alts = candidates.slice(1, 4);

    const priorityLabel = { speed:"Maximum Speed", value:"Best Value", capacity:"Largest Model Support", portable:"Portability" }[priority];
    const osLabel = selectedOs === 'any' ? 'Any OS' : selectedOs === 'macos' ? 'macOS' : selectedOs === 'windows' ? 'Windows' : 'Linux';
    const modelLabel = modelSize >= 120 ? '120B+' : modelSize + 'B';

    const whyMap = {
      speed:    `delivers the highest token generation speed (~${best.tg7b} t/s on 7B models) within your budget`,
      value:    `gives the best tokens-per-dollar ratio within your $${budget.toLocaleString()} budget`,
      capacity: `supports up to ${best.maxModel}B parameter models${best.tg70b ? ', including 70B at ~' + best.tg70b + ' t/s' : ''}, the largest available in range`,
      portable: `is the best portable option${best.ff === 'laptop' ? ' (laptop form factor)' : ''} with solid inference speed`
    };

    resultsEl.innerHTML = `
      <div class="result-card">
        <div class="result-rank">üèÜ Best match for ${osLabel} ¬∑ ${modelLabel} target ¬∑ ${priorityLabel}</div>
        <div class="result-name">${best.name}</div>
        <div class="result-meta">
          <span class="result-meta-chip">üí∞ From $${best.minPrice.toLocaleString()}</span>
          <span class="result-meta-chip">‚ö° ~${best.tg7b} t/s (7B Q4)</span>
          <span class="result-meta-chip">üì¶ Up to ${best.maxModel >= 200 ? '200B+' : best.maxModel + 'B'} models</span>
          <span class="result-meta-chip">${best.ff === 'laptop' ? 'üíº Portable' : 'üñ•Ô∏è Desktop'}</span>
          <span class="result-meta-chip">${best.os.join(' / ')}</span>
        </div>
        <div class="result-why">
          <strong>Why this one?</strong> This system ${whyMap[priority]}.
          ${modelSize >= 70 && best.maxModel >= 70 ? ' It can handle your target model size (' + modelLabel + ') fully in memory.' : ''}
          ${priority === 'value' && best.os.includes('windows') ? ' Building a custom PC around this GPU can cut costs further ‚Äî see the DIY tab.' : ''}
        </div>
      </div>
      ${alts.length > 0 ? `
      <div class="alt-results">
        <h4>Also consider</h4>
        ${alts.map(s => `
          <div class="alt-card">
            <div>
              <div class="alt-name">${s.name}</div>
              <div class="alt-reason">${s.tg7b} t/s ¬∑ up to ${s.maxModel}B ¬∑ ${s.ff} ¬∑ ${s.os.join('/')}</div>
            </div>
            <div class="alt-price">from $${s.minPrice.toLocaleString()}</div>
          </div>`).join('')}
      </div>` : ''}
    `;
  }
</script>
</body>
</html>